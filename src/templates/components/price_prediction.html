<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price Prediction Component</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 min-h-screen p-8">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Price Prediction Component
        function PricePrediction({ currentPrice, flightRoute, departureDate }) {
            const [prediction, setPrediction] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                // Simulate price analysis with mock historical data
                setTimeout(() => {
                    const historicalAverage = generateHistoricalAverage(currentPrice);
                    const priceDifference = currentPrice - historicalAverage;
                    const percentageDiff = ((priceDifference / historicalAverage) * 100).toFixed(1);
                    
                    const isGreatDeal = priceDifference < -50; // More than $50 below average
                    const isExpensive = priceDifference > 50; // More than $50 above average
                    
                    setPrediction({
                        historicalAverage,
                        currentPrice,
                        difference: priceDifference,
                        percentageDiff,
                        isGreatDeal,
                        isExpensive,
                        trend: priceDifference < 0 ? 'down' : 'up',
                        recommendation: isGreatDeal ? 'book' : isExpensive ? 'wait' : 'moderate'
                    });
                    setLoading(false);
                }, 1000);
            }, [currentPrice]);

            // Generate mock historical average (±15-25% of current price)
            function generateHistoricalAverage(price) {
                const variance = Math.random() * 0.25 + 0.15; // 15-40% variance
                const direction = Math.random() > 0.5 ? 1 : -1;
                return Math.round(price * (1 + (variance * direction)));
            }

            if (loading) {
                return (
                    <div className="max-w-md mx-auto bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 shadow-2xl">
                        <div className="animate-pulse">
                            <div className="h-4 bg-slate-700 rounded w-3/4 mb-4"></div>
                            <div className="h-8 bg-slate-700 rounded w-1/2 mb-4"></div>
                            <div className="h-4 bg-slate-700 rounded w-full"></div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-md mx-auto bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 shadow-2xl hover:border-white/20 transition-all duration-300">
                    {/* Header */}
                    <div className="flex items-center justify-between mb-6">
                        <div>
                            <h2 className="text-2xl font-bold text-white mb-1">Price Prediction</h2>
                            <p className="text-slate-400 text-sm">{flightRoute}</p>
                        </div>
                        <div className="bg-blue-500/20 rounded-full p-3">
                            <i className="fas fa-chart-line text-blue-400 text-xl"></i>
                        </div>
                    </div>

                    {/* Price Comparison */}
                    <div className="mb-6">
                        <div className="flex items-baseline justify-between mb-2">
                            <span className="text-slate-400 text-sm">Current Price</span>
                            <span className="text-3xl font-bold text-white">${currentPrice}</span>
                        </div>
                        <div className="flex items-baseline justify-between">
                            <span className="text-slate-400 text-sm">Historical Average</span>
                            <span className="text-lg text-slate-300">${prediction.historicalAverage}</span>
                        </div>
                    </div>

                    {/* Price Difference Indicator */}
                    <div className={`rounded-2xl p-4 mb-6 ${
                        prediction.isGreatDeal 
                            ? 'bg-green-500/20 border border-green-500/50' 
                            : prediction.isExpensive 
                            ? 'bg-red-500/20 border border-red-500/50'
                            : 'bg-blue-500/20 border border-blue-500/50'
                    }`}>
                        <div className="flex items-center justify-between">
                            <span className={`font-semibold ${
                                prediction.isGreatDeal ? 'text-green-400' : 
                                prediction.isExpensive ? 'text-red-400' : 'text-blue-400'
                            }`}>
                                {prediction.trend === 'down' ? '↓' : '↑'} 
                                ${Math.abs(prediction.difference)} ({Math.abs(prediction.percentageDiff)}%)
                            </span>
                            <i className={`fas ${
                                prediction.trend === 'down' ? 'fa-arrow-trend-down' : 'fa-arrow-trend-up'
                            } ${
                                prediction.isGreatDeal ? 'text-green-400' : 
                                prediction.isExpensive ? 'text-red-400' : 'text-blue-400'
                            }`}></i>
                        </div>
                    </div>

                    {/* Recommendation Badge */}
                    {prediction.isGreatDeal && (
                        <div className="bg-gradient-to-r from-green-600 to-emerald-600 rounded-2xl p-4 mb-4">
                            <div className="flex items-center gap-3">
                                <div className="bg-white/20 rounded-full p-2">
                                    <i className="fas fa-check-circle text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 className="text-white font-bold text-lg">Great Deal!</h3>
                                    <p className="text-white/90 text-sm">Book now to save money</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {prediction.isExpensive && (
                        <div className="bg-gradient-to-r from-orange-600 to-red-600 rounded-2xl p-4 mb-4">
                            <div className="flex items-center gap-3">
                                <div className="bg-white/20 rounded-full p-2">
                                    <i className="fas fa-exclamation-triangle text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 className="text-white font-bold text-lg">Wait to Book</h3>
                                    <p className="text-white/90 text-sm">Prices are currently high</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {!prediction.isGreatDeal && !prediction.isExpensive && (
                        <div className="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-4 mb-4">
                            <div className="flex items-center gap-3">
                                <div className="bg-white/20 rounded-full p-2">
                                    <i className="fas fa-info-circle text-white text-xl"></i>
                                </div>
                                <div>
                                    <h3 className="text-white font-bold text-lg">Fair Price</h3>
                                    <p className="text-white/90 text-sm">Price is near average</p>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Action Button */}
                    <button className="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-3 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/50">
                        {prediction.isGreatDeal ? 'Book Now' : 'View Details'}
                        <i className="fas fa-arrow-right ml-2"></i>
                    </button>

                    {/* Price History Chart Placeholder */}
                    <div className="mt-6 pt-6 border-t border-white/10">
                        <p className="text-slate-400 text-xs text-center">
                            <i className="fas fa-clock mr-1"></i>
                            Based on 30-day price history
                        </p>
                    </div>
                </div>
            );
        }

        // Demo App with multiple examples
        function App() {
            const flights = [
                { id: 1, route: 'NYC → LAX', price: 299, date: '2026-03-15' },
                { id: 2, route: 'SFO → MIA', price: 450, date: '2026-03-20' },
                { id: 3, route: 'BOS → SEA', price: 380, date: '2026-04-01' },
            ];

            const [selectedFlight, setSelectedFlight] = useState(flights[0]);

            return (
                <div className="max-w-6xl mx-auto">
                    <div className="text-center mb-12">
                        <h1 className="text-5xl font-bold text-white mb-4">Price Prediction</h1>
                        <p className="text-slate-400 text-lg">AI-powered flight price analysis</p>
                    </div>

                    {/* Flight Selector */}
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                        {flights.map(flight => (
                            <button
                                key={flight.id}
                                onClick={() => setSelectedFlight(flight)}
                                className={`p-4 rounded-2xl border-2 transition-all ${
                                    selectedFlight.id === flight.id
                                        ? 'border-blue-500 bg-blue-500/20'
                                        : 'border-white/10 bg-white/5 hover:border-white/20'
                                }`}
                            >
                                <p className="text-white font-semibold mb-1">{flight.route}</p>
                                <p className="text-slate-400 text-sm">${flight.price}</p>
                            </button>
                        ))}
                    </div>

                    {/* Price Prediction Card */}
                    <PricePrediction
                        key={selectedFlight.id}
                        currentPrice={selectedFlight.price}
                        flightRoute={selectedFlight.route}
                        departureDate={selectedFlight.date}
                    />
                </div>
            );
        }

        // Render
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
